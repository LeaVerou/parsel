var parsel=function(e){"use strict";const t={attribute:/\[\s*(?:(?<namespace>\*|[-\w]*)\|)?(?<name>[-\w\u{0080}-\u{FFFF}]+)\s*(?:(?<operator>\W?=)\s*(?<value>.+?)\s*(?<caseSensitive>[iIsS])?\s*)?\]/gu,id:/#(?<name>(?:[-\w\u{0080}-\u{FFFF}]|\\.)+)/gu,class:/\.(?<name>(?:[-\w\u{0080}-\u{FFFF}]|\\.)+)/gu,comma:/\s*,\s*/g,combinator:/\s*[\s>+~]\s*/g,"pseudo-element":/::(?<name>[-\w\u{0080}-\u{FFFF}]+)(?:\((?<argument>¶+)\))?/gu,"pseudo-class":/:(?<name>[-\w\u{0080}-\u{FFFF}]+)(?:\((?<argument>¶+)\))?/gu,type:/(?:(?<namespace>\*|[-\w]*)\|)?(?<name>[-\w\u{0080}-\u{FFFF}]+)|\*/gu},n=new Set(["pseudo-class","pseudo-element"]),s=new Set([...n,"attribute"]),r=new Set(["combinator","comma"]),l=new Set(["not","is","where","has","matches","-moz-any","-webkit-any","nth-child","nth-last-child"]),o={"nth-child":/(?<index>[\dn+-]+)\s+of\s+(?<subtree>.+)/};l["nth-last-child"]=o["nth-child"];const i=Object.assign({},t);function a(e,t){let n="",s=[];for(;t<e.length;t++){let r=e[t];if("("===r)s.push(r);else if(")"===r){if(!(s.length>0))throw new Error("Closing paren without opening paren at "+t);s.pop()}if(n+=r,0===s.length)return n}throw new Error("Opening paren without closing paren")}function u(e,t){if(!e)return[];var n=[e];for(var s in t){let e=t[s];for(var l=0;l<n.length;l++){var o=n[l];if("string"==typeof o){e.lastIndex=0;var i=e.exec(o);if(i){let e=i.index-1,t=[],r=i[0],a=o.slice(0,e+1);a&&t.push(a),t.push({type:s,content:r,...i.groups});let u=o.slice(e+r.length+1);u&&t.push(u),n.splice(l,1,...t)}}}}let a=0;for(let e=0;e<n.length;e++){let t=n[e],s=t.length||t.content.length;"object"==typeof t&&(t.pos=[a,a+s],r.has(t.type)&&(t.actualContent=t.content,t.content=t.content.trim()||" ")),a+=s}return n}function c(e){if(!e)return null;e=e.trim();let r=[];e=e.replace(/(['"])(\\\1|.)+?\1/g,((e,t,n,s)=>(r.push({str:e,start:s}),t+"§".repeat(n.length)+t)));let l,o=[],c=0;for(;(l=e.indexOf("(",c))>-1;){let t=a(e,l);o.push({str:t,start:l}),e=e.substring(0,l)+"("+"¶".repeat(t.length-2)+")"+e.substring(l+t.length),c=l+t.length}let p=u(e,t);function f(e,t,n){for(let s of e)for(let e of p)if(n.has(e.type)&&e.pos[0]<s.start&&s.start<e.pos[1]){let n=e.content;if(e.content=e.content.replace(t,s.str),e.content!==n){i[e.type].lastIndex=0;let t=i[e.type].exec(e.content).groups;Object.assign(e,t)}}}return f(o,/\(¶+\)/,n),f(r,/(['"])§+?\1/,s),p}function p(e,{list:t=!0,includeCommaInList:n=!1}={}){if(t&&e.find((e=>"comma"===e.type))){let t=[],s=[];for(let r=0;r<e.length;r++)if("comma"===e[r].type){if(0===s.length)throw new Error("Incorrect comma at "+r);t.push(p(s,{list:!1})),n&&t.push(e[r]),s.length=0}else s.push(e[r]);if(0===s.length)throw new Error("Trailing comma");return t.push(p(s,{list:!1})),{type:"list",list:t}}for(let t=e.length-1;t>=0;t--){let n=e[t];if("combinator"===n.type){let s=e.slice(0,t),r=e.slice(t+1);return{type:"complex",combinator:n.content,actualCombinator:n.actualContent,left:p(s),right:p(r)}}}return 0===e.length?null:1===e.length?e[0]:{type:"compound",list:[...e]}}function f(e,t,n,s){if(e){if("complex"===e.type)f(e.left,t,n,e),f(e.right,t,n,e);else if("compound"===e.type)for(let s of e.list)f(s,t,n,e);else e.subtree&&n&&n.subtree&&f(e.subtree,t,n,e);t(e,s)}}function m(e,{recursive:t=!0,list:n=!0,includeCommaInList:s=!1}={}){let r=c(e);if(!r)return null;let i=p(r,{list:n,includeCommaInList:s});return t&&f(i,(e=>{if("pseudo-class"===e.type&&e.argument&&l.has(e.name)){let t=e.argument;const n=o[e.name];if(n){const s=n.exec(t);if(!s)return;Object.assign(e,s.groups),t=s.groups.subtree}t&&(e.subtree=m(t,{recursive:!0,list:!0}))}})),i}function g(e,t){return t=t||Math.max(...e)+1,e[0]*t**2+e[1]*t+e[2]}function h(e,t){switch(e.type){case"compound":for(let n=0,s=e.list.length;n<s;n++)t=h(e.list[n],t);break;case"attribute":case"id":case"class":case"pseudo-element":case"pseudo-class":case"type":t+=e.content;break;case"comma":t+=e.actualContent;break;case"complex":t=h(e.left,t),t+=e.actualCombinator,t=h(e.right,t);break;case"list":t=e.list.map((function(e){return h(e,"")})).join("")}return t}return i["pseudo-element"]=RegExp(t["pseudo-element"].source.replace("(?<argument>¶+)","(?<argument>.+?)"),"gu"),i["pseudo-class"]=RegExp(t["pseudo-class"].source.replace("(?<argument>¶+)","(?<argument>.+)"),"gu"),e.RECURSIVE_PSEUDO_CLASSES=l,e.RECURSIVE_PSEUDO_CLASSES_ARGS=o,e.TOKENS=t,e.TRIM_TOKENS=r,e.gobbleParens=a,e.nestTokens=p,e.parse=m,e.specificity=function e(t,{format:n="array"}={}){let s="object"==typeof t?t:m(t,{recursive:!0});if(!s)return null;if("list"===s.type){let t=10,n=s.list.map((n=>{let s=e(n);return t=Math.max(t,...s),s})),r=n.map((e=>g(e,t)));return n[function(e){let t=e[0],n=0;for(let s=0;s<e.length;s++)e[s]>t&&(n=s,t=e[s]);return 0===e.length?-1:n}(r)]}let r=[0,0,0];return f(s,(t=>{if("id"===t.type)r[0]++;else if("class"===t.type||"attribute"===t.type)r[1]++;else if("type"===t.type&&"*"!==t.content||"pseudo-element"===t.type)r[2]++;else if("pseudo-class"===t.type&&"where"!==t.name)if(l.has(t.name)&&t.subtree){e(t.subtree).forEach(((e,t)=>r[t]+=e))}else r[1]++})),r},e.specificityToNumber=g,e.stringify=function(e){return"object"==typeof e?h(e,""):null},e.tokenize=c,e.tokenizeBy=u,e.walk=f,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
